<div class="container-fluid">
  <div class="row">
    <div class="col-lg-9">
      <div class="row">
        <div class="col">
          <mat-card>
            <mat-card-content>
              <div class="row">
                <span class="col">
                  <p class="heading">Data Search</p>
                </span>
              </div>
              <div class="row">
                <div class="col-12 col-md-6 col-lg-4 m-t-10">
                  <p>Are you the requestor of data?</p>
                </div>
                <div class="col-12 col-md-6 col-lg-2 m-t-10">
                  <mat-radio-group [(ngModel)]="requestor">
                    <mat-radio-button class="m-r-10" value="yes">Yes</mat-radio-button>
                    <mat-radio-button value="no">No</mat-radio-button>
                  </mat-radio-group>
                </div>
              </div>
              <form [formGroup]="requesterForm">
                <div *ngIf="requestor === 'no'">
                  <div class="row">
                    <div *ngIf="requestor === 'no'" class="col-12 col-md-6 col-lg-4">
                      <mat-form-field appearance="outline">
                        <mat-label>Requestor</mat-label>
                        <mat-select [(ngModel)]="requestorClient" (selectionChange)="setValidation()"
                          [ngModelOptions]="{ standalone: true }" matInput>
                          <mat-option *ngFor="let item of reqTypes" [value]="item.itemId">
                            {{item.caption}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4">
                      <mat-form-field appearance="outline">
                        <mat-label>Requestor Name</mat-label>
                        <input formControlName="firstName" matInput />
                      </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4">
                      <mat-form-field appearance="outline">
                        <mat-label>Requestor Surname</mat-label>
                        <input formControlName="surName" matInput required />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 col-md-6 col-lg-4" *ngIf="
                        requestorClient == 439 ||
                        requestorClient == 444 ||
                        requestorClient == 445
                      ">
                      <mat-form-field appearance="outline">
                        <mat-label>Contact Number</mat-label>
                        <input formControlName="contactNo" matInput />
                      </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4" *ngIf="
                        requestorClient == 439 ||
                        requestorClient == 440
                      ">
                      <mat-form-field appearance="outline">
                        <mat-label>Email</mat-label>
                        <input formControlName="email" matInput />
                      </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4" *ngIf="
                        requestorClient == 439 ||
                        requestorClient == 441
                      ">
                      <mat-form-field appearance="outline">
                        <mat-label>Fax</mat-label>
                        <input formControlName="fax" matInput />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 col-md-6 col-lg-4" *ngIf="
                        requestorClient == 439 ||
                        requestorClient == 442 ||
                        requestorClient == 443
                      ">
                      <mat-form-field appearance="outline">
                        <mat-label>Address Line 1</mat-label>
                        <input formControlName="addressLine1" matInput />
                      </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4" *ngIf="
                        requestorClient == 439 ||
                        requestorClient == 442 ||
                        requestorClient == 443
                      ">
                      <mat-form-field appearance="outline">
                        <mat-label>Address Line 2</mat-label>
                        <input formControlName="addressLine2" matInput />
                      </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4" *ngIf="
                    requestorClient == 439 ||
                    requestorClient == 442 ||
                    requestorClient == 443
                      ">
                      <mat-form-field appearance="outline">
                        <mat-label>Address Line 3</mat-label>
                        <input formControlName="addressLine3" matInput />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 col-md-6 col-lg-4" *ngIf="
                    requestorClient == 439 ||
                    requestorClient == 442 ||
                    requestorClient == 443
                      ">
                      <mat-form-field appearance="outline">
                        <mat-label>Postal Code</mat-label>
                        <input formControlName="postalCode" matInput />
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </form>
              <hr />
              <div class="row">
                <span class="col col-md-4">
                  <form [formGroup]="provinceForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Province</mat-label>
                      <mat-select [(ngModel)]="province" formControlName="assignedProvince" #provinceSelect required>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="provinceFilterCtrl"
                            (ngModelChange)="getSearchTypeConfig(false, false, false)"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredProvince | async" [value]="x">
                          {{ x.provinceName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-4">
                  <form [formGroup]="criteriaForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Search By</mat-label>
                      <mat-select [(ngModel)]="searchType" formControlName="assignedCriteria" #searchTypeSelect
                        required>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="searchTypeFilterCtrl"
                            (ngModelChange)="getSearchTypeConfig(false, false, false)"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredCriteria | async" [value]="x">
                          {{ x.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-4">
                  <form [formGroup]="searchFiltersForm">
                    <mat-form-field *ngIf="
                        searchType &&
                        searchFilters !== undefined &&
                        searchFilters.length > 0
                      " appearance="outline">
                      <mat-label>Search Filter</mat-label>
                      <mat-select (selectionChange)="getSearchFilter()" [(ngModel)]="searchFilter"
                        formControlName="assignedSearchFilters" matInput>
                        <mat-option *ngFor="let x of searchFilters" [value]="x">{{ x.name }}</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
              </div>
              <div *ngIf="
                  searchType &&
                  searchFilters !== undefined &&
                  searchFilters.length > 0 &&
                  searchType.searchTypeId === 1
                " class="row">
                <span class="col col-md-4">
                  <mat-form-field appearance="outline">
                    <mat-label>{{ searchFilter ? searchFilter.name : "" }} #</mat-label>
                    <input [(ngModel)]="searchNumber" matInput />
                  </mat-form-field>
                </span>
              </div>
              <div [hidden]="showMunicipalityFarm" class="row">
                <span class="col col-md-4">
                  <form [formGroup]="municipalityForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Muncipality</mat-label>
                      <mat-select formControlName="assignedMunicipality" [(ngModel)]="municipalityModel"
                        #municipalitySelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="municipalityFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredMuncipality | async" [value]="x.mdbCode">
                          {{ x.municipality }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-4">
                  <form [formGroup]="townshipForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Administration District/Registration
                        Division</mat-label>
                      <mat-select formControlName="assignedTownship" [(ngModel)]="TownshipModel" #townshipSelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="townshipFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredTownship | async" [value]="x.mdbCode">
                          {{ x.majorRegionOrAdminDistrict }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-4">
                  <form [formGroup]="farmForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Farm Number</mat-label>
                      <input formControlName="parcelNumber" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-4">
                  <form [formGroup]="farmForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Farm Name</mat-label>
                      <input formControlName="farmName" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-4">
                  <form [formGroup]="farmForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Portion Number</mat-label>
                      <input formControlName="portion" matInput />
                    </mat-form-field>
                  </form>
                </span>
              </div>
              <div [hidden]="showMunicipalityERF" class="row">
                <span class="col col-md-4">
                  <form [formGroup]="municipalityForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Muncipality</mat-label>
                      <mat-select formControlName="assignedMunicipality" [(ngModel)]="municipalityModel"
                        #municipalitySelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="municipalityFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredMuncipality | async" [value]="x.mdbCode">
                          {{ x.municipality }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-4">
                  <form [formGroup]="townshipForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Township/Allotment</mat-label>
                      <mat-select formControlName="assignedTownship" [(ngModel)]="TownshipModel" #townshipSelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="townshipFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredTownship | async" [value]="x.mdbCode">
                          {{ x.majorRegionOrAdminDistrict }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-4">
                  <form [formGroup]="ERF">
                    <mat-form-field appearance="outline">
                      <mat-label>ERF Number</mat-label>
                      <input formControlName="parcelNumber" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-4">
                  <form [formGroup]="ERF">
                    <mat-form-field appearance="outline">
                      <mat-label>Portion Number</mat-label>
                      <input formControlName="portion" matInput />
                    </mat-form-field>
                  </form>
                </span>
              </div>
              <div [hidden]="showMunicipalityLPI" class="row">
                <span class="col col-md-4">
                  <form [formGroup]="municipalityForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Muncipality</mat-label>
                      <mat-select formControlName="assignedMunicipality" [(ngModel)]="municipalityModel"
                        #municipalitySelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="municipalityFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredMuncipality | async" [value]="x.mdbCode">
                          {{ x.municipality }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-4">
                  <form [formGroup]="Lease">
                    <mat-form-field appearance="outline">
                      <mat-label>LPI</mat-label>
                      <input formControlName="lpi" matInput />
                    </mat-form-field>
                  </form>
                </span>
              </div>
              <div class="row">
                <span [hidden]="showMunicipalityHolding" class="col col-md-4">
                  <form [formGroup]="municipalityForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Muncipality</mat-label>
                      <mat-select formControlName="assignedMunicipality" [(ngModel)]="municipalityModel"
                        #municipalitySelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="municipalityFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredMuncipality | async" [value]="x.mdbCode">
                          {{ x.municipality }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span [hidden]="showMunicipalityHolding" class="col col-md-4">
                  <form [formGroup]="townshipForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Township/Allotment</mat-label>
                      <mat-select formControlName="assignedTownship" [(ngModel)]="TownshipModel" #townshipSelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="townshipFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredTownship | async" [value]="x.mdbCode">
                          {{ x.majorRegionOrAdminDistrict }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                searchType &&
                searchFilters !== undefined &&
                searchFilters.length > 0 &&
                searchType.searchTypeId == 10 &&
                searchFilter.name === 'Holdings'
              " class="col col-md-4">
                  <form [formGroup]="Holdings">
                    <mat-form-field appearance="outline">
                      <mat-label>Holding Number</mat-label>
                      <input formControlName="parcelNumber" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                searchType &&
                searchFilters !== undefined &&
                searchFilters.length > 0 &&
                searchType.searchTypeId == 10 &&
                searchFilter.name === 'Holdings'
              " class="col col-md-4">
                  <form [formGroup]="Holdings">
                    <mat-form-field appearance="outline">
                      <mat-label>Portion Number</mat-label>
                      <input formControlName="portion" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <!-- <form [formGroup]="Holdings">
                  <div *ngIf="
                      searchType &&
                      searchFilters !== undefined &&
                      searchFilters.length > 0 &&
                      searchType.searchTypeId == 10 &&
                      searchFilter.name === 'Holdings'
                    ">
                    <span class="col col-md-4">
                      <mat-form-field appearance="outline">
                        <mat-label>Holding Number</mat-label>
                        <input formControlName="parcelNumber" matInput />
                      </mat-form-field>
                    </span>
                    <span class="col col-md-4">
                      <mat-form-field appearance="outline">
                        <mat-label>Portion Number</mat-label>
                        <input formControlName="portion" matInput />
                      </mat-form-field>
                    </span>
                  </div>
                </form> -->
              </div>
              <div *ngIf="
                  searchType &&
                  searchFilters !== undefined &&
                  searchFilters.length > 0 &&
                  searchType.searchTypeId == 12
                " class="row">
                <span class="col col-md-4">
                  <mat-form-field appearance="outline">
                    <mat-label>Your Search</mat-label>
                    <input formControlName="portionNumber" matInput />
                  </mat-form-field>
                </span>
              </div>
              <div [hidden]="showMunicipalityERFFARM" class="row">
                <span [hidden]="showMunicipalityERFFARM" class="col col-md-4">
                  <form [formGroup]="municipalityForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Muncipality</mat-label>
                      <mat-select formControlName="assignedMunicipality" [(ngModel)]="municipalityModel"
                        #municipalitySelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="municipalityFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredMuncipality | async" [value]="x.mdbCode">
                          {{ x.municipality }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span [hidden]="showTownshipERF" class="col col-md-4">
                  <form [formGroup]="townshipForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Township/Allotment</mat-label>
                      <mat-select formControlName="assignedTownship" [(ngModel)]="TownshipModel" #townshipSelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="townshipFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredTownship | async" [value]="x.mdbCode">
                          {{ x.majorRegionOrAdminDistrict }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span [hidden]="showTownshipFarm" class="col col-md-4">
                  <form [formGroup]="townshipForm">
                    <mat-form-field appearance="outline">
                      <mat-label>Administration District/Registration
                        Division</mat-label>
                      <mat-select formControlName="assignedTownship" [(ngModel)]="TownshipModel" #townshipSelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="townshipFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredTownship | async" [value]="x.mdbCode">
                          {{ x.majorRegionOrAdminDistrict }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId === 11 &&
                    searchFilter?.name.includes('Scheme Number')
                  " class="col col-md-4">
                  <form [formGroup]="sectionalTitle">
                    <mat-form-field appearance="outline">
                      <mat-label>Deed Registration Number</mat-label>
                      <input formControlName="schemeNumber" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId === 11 &&
                    searchFilter?.name.includes('Scheme Name')
                  " class="col col-md-4">
                  <form [formGroup]="sectionalTitle">
                    <mat-form-field appearance="outline">
                      <mat-label>Scheme Name</mat-label>
                      <input formControlName="schemeName" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId === 11 &&
                    searchFilter?.name.includes('Filling Number')
                  " class="col col-md-4">
                  <form [formGroup]="sectionalTitle">
                    <mat-form-field appearance="outline">
                      <mat-label>Filing Number</mat-label>
                      <input formControlName="filingNumber" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId === 11 &&
                    searchFilter?.name.includes('SG Number')
                  " class="col col-md-4">
                  <form [formGroup]="sectionalTitle">
                    <mat-form-field appearance="outline">
                      <mat-label>SG Number</mat-label>
                      <input formControlName="sgNumber" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId === 11 &&
                    searchFilter?.name.includes('FARM')
                  " class="col col-md-4">
                  <form [formGroup]="sectionalTitle">
                    <mat-form-field appearance="outline">
                      <mat-label>Farm Name</mat-label>
                      <input formControlName="farmName" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId === 11 &&
                    searchFilter?.name.includes('ERF')
                  " class="col col-md-4">
                  <form [formGroup]="sectionalTitle">
                    <mat-form-field appearance="outline">
                      <mat-label>Erf Number</mat-label>
                      <input formControlName="parcel" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId === 11 &&
                    searchFilter?.name.includes('FARM')
                  " class="col col-md-4">
                  <form [formGroup]="sectionalTitle">
                    <mat-form-field appearance="outline">
                      <mat-label>Farm Number</mat-label>
                      <input formControlName="parcel" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId === 11 &&
                    (searchFilter?.name === 'ERF' ||
                      searchFilter?.name === 'FARM')
                  " class="col col-md-4">
                  <form [formGroup]="sectionalTitle">
                    <mat-form-field appearance="outline">
                      <mat-label>Portion</mat-label>
                      <input formControlName="portion" matInput />
                    </mat-form-field>
                  </form>
                </span>
              </div>
              <div *ngIf="
                  searchType &&
                  searchFilters !== undefined &&
                  searchFilters.length > 0 &&
                  searchType.searchTypeId == 47
                " class="row">
                <span class="col col-md-4">
                  <mat-form-field appearance="outline" class="mt-2">
                    <mat-label>Choose File</mat-label>
                    <input [value]="uploadedFileName" disabled disabled matInput />
                    <button (click)="fileInput.click()" mat-icon-button matSuffix>
                      <mat-icon class="attach">attach_file</mat-icon>
                    </button>
                    <input #fileInput (change)="selectFile($event)" hidden id="newFile" type="file" />
                  </mat-form-field>
                </span>
                <span class="col col-md-4" style="margin-top: 10px">
                  <div>
                    <a (click)="downloadcsv()" style="color: blue; cursor: pointer">Download sample template</a>
                  </div>
                </span>
              </div>
              <div [hidden]="showRange" class="row">
                <span class="col col-md-4">
                  <form [formGroup]="townshipForm">
                    <mat-form-field appearance="outline">
                      <mat-label [hidden]="!showFarmLabel">Administration District/Registration Division</mat-label>
                      <mat-label [hidden]="showFarmLabel">Township/Allotment
                      </mat-label>
                      <mat-select formControlName="assignedTownship" [(ngModel)]="TownshipModel" #townshipSelect>
                        <mat-option>
                          <ngx-mat-select-search [formControl]="townshipFilterCtrl"
                            [ngModelOptions]="{ standalone: true }" placeholderLabel="Search..."
                            noEntriesFoundLabel="'No result found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let x of filteredTownship | async" [value]="x.mdbCode">
                          {{ x.majorRegionOrAdminDistrict }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    this.searchType &&
                    this.searchFilters !== undefined &&
                    this.searchFilters.length > 0 &&
                    this.searchType.searchTypeId == 13 &&
                    searchFilter?.name === 'FARM'
                  " class="col col-md-4">
                  <form [formGroup]="rangeSearch">
                    <mat-form-field appearance="outline">
                      <mat-label>Farm Name</mat-label>
                      <input formControlName="farmName" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    this.searchType &&
                    this.searchFilters !== undefined &&
                    this.searchFilters.length > 0 &&
                    this.searchType.searchTypeId == 13 &&
                    (searchFilter?.name === 'FARM' || searchFilter.searchTypeId === 45)
                  " class="col col-md-4">
                  <form [formGroup]="rangeSearch">
                    <mat-form-field appearance="outline">
                      <mat-label> {{searchFilter?.name === 'FARM' ? 'Farm Number' : 'Parcel'}}</mat-label>
                      <input formControlName="parcel" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <!-- <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId == 13 &&
                    searchFilter?.name === 'FARM'
                  " class="col col-md-4">
                </span> -->
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId == 13 &&
                    searchFilter?.name?.includes('Parcel')
                  " class="col col-md-4">
                  <form [formGroup]="rangeSearch">
                    <mat-form-field appearance="outline">
                      <mat-label>{{searchFilter?.name?.includes('Holding') ? 'Holding From' : 'Parcel From'}}
                      </mat-label>
                      <input formControlName="parcelFrom" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <!-- <b *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId == 13 &&
                    searchFilter?.name?.includes('Parcel')
                  " style="margin-top: 20px">-</b> -->
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId == 13 &&
                    searchFilter?.name?.includes('Parcel')
                  " class="col col-md-4">
                  <form [formGroup]="rangeSearch">
                    <mat-form-field appearance="outline">
                      <mat-label>{{searchFilter?.name?.includes('Holding') ? 'Holding To' : 'Parcel To'}}</mat-label>
                      <input formControlName="parcelTo" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <!-- <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId == 13 &&
                    searchFilter?.name?.includes('Parcel')
                  " class="col col-md-1"></span> -->
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId == 13 &&
                    (searchFilter?.name?.includes('Portion') ||
                      searchFilter?.name === 'FARM')
                  " class="col col-md-4">
                  <form [formGroup]="rangeSearch">
                    <mat-form-field appearance="outline">
                      <mat-label>Portion From</mat-label>
                      <input formControlName="portionFrom" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <!-- <b *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId == 13 &&
                    (searchFilter?.name?.includes('Portion') ||
                      searchFilter?.name === 'FARM')
                  " style="margin-top: 20px">-</b> -->
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId == 13 &&
                    (searchFilter?.name?.includes('Portion') ||
                      searchFilter?.name === 'FARM')
                  " class="col col-md-4">
                  <form [formGroup]="rangeSearch">
                    <mat-form-field appearance="outline">
                      <mat-label>Portion To</mat-label>
                      <input formControlName="portionTo" matInput />
                    </mat-form-field>
                  </form>
                </span>
                <span *ngIf="
                    searchType &&
                    searchFilters !== undefined &&
                    searchFilters.length > 0 &&
                    searchType.searchTypeId == 13 &&
                    searchFilter.searchTypeId === 42
                  " class="col col-md-4">
                  <form [formGroup]="rangeSearch">
                    <mat-form-field appearance="outline">
                      <mat-label>Holding Number</mat-label>
                      <input formControlName="parcel" matInput />
                    </mat-form-field>
                  </form>
                </span>
              </div>
              <div *ngIf="
                  searchType &&
                  searchFilters !== undefined &&
                  searchFilters.length > 0 &&
                  searchType.searchTypeId == 46
                " class="row">
                <span class="col col-md-6">
                  <form [formGroup]="textSearch">
                    <mat-form-field appearance="outline">
                      <mat-label>Text Search</mat-label>
                      <input type="text" matInput formControlName="lpi">
                    </mat-form-field>
                  </form>
                </span>
                <span class="col col-md-6" style="top: 8px !important">
                  <button mat-icon-button matSuffix matTooltip="Use % wild card for text search">
                    <mat-icon aria-label="Button that shows a red tooltip" class="t-button" style="cursor: pointer;">
                      error_outline
                    </mat-icon>
                  </button>
                </span>
              </div>
              <div class="row"></div>
              <div class="row" style="top: 10px !important">
                <span class="col">
                  <button mat-raised-button (click)="search()" class="submit-button bover pull-left" type="submit">
                    Search
                  </button>
                </span>
                <span style="float: right">
                  <mat-slide-toggle (change)="onChange($event)" [checked]="device" ngDefaultControl>Card/Table
                  </mat-slide-toggle>
                </span>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
      <div class="row mx-0 ml-3" *ngIf="(results || NgiData)">
        <div class="col">
          <span style="margin: 0px 10px 10px !important;padding: 10px !important;float: right;"
            *ngIf="(results.length > 0 || NgiData?.length > 0)">
            <button [disabled]="selection.selected.length === 0" mat-raised-button (click)="addToCart()"
              class="submit-button bover pull-left " type="submit">
              Add to Cart
            </button>
          </span>
        </div>
      </div>
      <div class="row mx-0 ml-3" *ngIf="(results || NgiData)">
        <div class="col-md-8">
          <span *ngIf="(results.length > 0 || NgiData?.length > 0)">{{ pageFromValue }} - {{ pageToValue }} Out Of {{ pageSize }}</span>
          <span class="ml-2" *ngIf="totalTemplateRecords > 0"> ----- {{foundRecord}} Results found out of
            {{totalTemplateRecords}} inputs
            <a (click)="downloadTemplateResult()" style="cursor: pointer; color:blue">Click here to download the
              list</a>
          </span>

        </div>
        <div class="col-md-4" *ngIf="(results.length > 0 || NgiData?.length > 0)">
          <ngb-pagination style="float: right" [collectionSize]="pageSize" [pageSize]="20" [(page)]="boundaryPage"
            [maxSize]="20" [rotate]="true" [boundaryLinks]="true" (pageChange)="loadPage($event)"></ngb-pagination>
        </div>
      </div>
      <div *ngIf="results && device == false" class="row mx-0">
        <div *ngFor="let x of results" class="col col-md-6 p-0">
          <mat-card *ngIf="searchFilter.templateListItemId !== 567" (click)="openDetails(x)" class="card-BaseList-group"
            style="cursor: pointer">
            <mat-card-content>
              <div class="row">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(x) : null"
                  [checked]="selection.isSelected(x)" matTooltip="Add to cart">
                </mat-checkbox>
                <span class="col p-0">
                  <a class="download-css float-right" style="cursor: pointer">
                    <mat-icon>visibility</mat-icon>
                  </a>
                </span>
              </div>
              <span class="row">
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>SG No:</b>
                  </p>
                  <p class="desc-text m-0">{{ x.sgNo }}</p>
                </span>
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>Region:</b>
                  </p>
                  <p class="desc-text m-0">
                    {{
                    x.region != undefined && x.region != null
                    ? x.region
                    : x.minorRegion
                    }}
                  </p>
                </span>
              </span>
              <span class="row">
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>Document Type:</b>
                  </p>
                  <p class="desc-text m-0">{{ x.documentType }}</p>
                </span>
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>Parcel:</b>
                  </p>
                  <p class="desc-text m-0">
                    {{
                    x.parcel != null && x.parcel != undefined
                    ? x.parcel
                    : x.erfNumber != null && x.erfNumber != undefined
                    ? x.erfNumber
                    : x.farmNumber != null && x.farmNumber != undefined
                    ? x.farmNumber
                    : x.holdingNumber
                    }}
                  </p>
                </span>
              </span>
              <span class="row">
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>LPI:</b>
                  </p>
                  <p class="desc-text m-0">{{ x.lpi }}</p>
                </span>
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>Document Sub-Type:</b>
                  </p>
                  <p class="desc-text m-0">{{ x.documentSubType }}</p>
                </span>
              </span>
              <span class="row">
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>Municipality:</b>
                  </p>
                  <p class="desc-text m-0">{{ x.localMunicipalityName }}</p>
                </span>
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>Portion Number:</b>
                  </p>
                  <p class="desc-text m-0">{{ x.portion }}</p>
                </span>
              </span>
              <span class="row" *ngIf="
                  searchType.searchTypeId === 1 &&
                  searchFilter.searchTypeId !== 2
                ">
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>{{ searchFilter.name }}:</b>
                  </p>
                  <p class="desc-text m-0">{{ this.searchNumber }}</p>
                </span>
                <span class="col my-2"> </span>
              </span>
              <span class="row" *ngIf="
                  searchType.searchTypeId === 47 &&
                  searchFilter.searchTypeId !== 483
                ">
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>{{ searchFilter.name }}:</b>
                  </p>
                  <p class="desc-text m-0">
                    {{
                    searchFilter.searchTypeId == 48
                    ? x.sgNo
                    : searchFilter.searchTypeId == 481
                    ? x.surveyRecordNo
                    : x.compilationNo
                    }}
                  </p>
                </span>
                <span class="col my-2"> </span>
              </span>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

      <div *ngIf="NgiData && device == false" class="row mx-0" >
        <div *ngFor="let x of NgiData" class="col col-md-6 p-0">
          <mat-card *ngIf="searchFilter?.templateListItemId === 567" (click)="openNgiDetails(x)" class="card-BaseList-group" style="cursor: pointer">
            <mat-card-content>
              <div class="row">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(x) : null"
                  [checked]="selection.isSelected(x)" matTooltip="Add to cart">
                </mat-checkbox>
                <span class="col p-0">
                  <a class="download-css float-right" style="cursor: pointer">
                    <mat-icon>visibility</mat-icon>
                  </a>
                </span>
              </div>
              <span class="row">
                <span class="col my-2">
                  <p class="desc-text m-0">
                    <b>{{x.categoryName}}</b>
                    <br>
                    <!-- <b>test</b> -->
                  </p>
                </span>
              </span>
              <span class="row">
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>{{x.name}}</b>
                  </p>
                </span>
              </span>
              <span class="row">
                <span class="col my-2">
                  <p class="info-text m-0">
                    <b>{{x.description}}</b>
                  </p>
                </span>
              </span>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
      <div *ngIf="results != undefined && results.length > 0 && device == true && searchFilter?.templateListItemId !== 567" class="row mx-0">
        <!-- <div> -->
        <mat-card class="card-table-tasks" style="cursor: pointer; width: -webkit-fill-available">
          <mat-card-content class="table-tasks" style="overflow-x: hidden;">
            <!-- <div class="row"> -->
            <table [dataSource]="dataSource" class="table-margin w-100 inline-table" mat-table matSort>
              <ng-container matColumnDef="select">
                <th mat-header-cell *matHeaderCellDef>
                  <mat-checkbox (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()">
                  </mat-checkbox>
                </th>
                <td mat-cell *matCellDef="let row" style="padding-top: 10px;; padding-right: 10px;">
                  <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)" matTooltip="Add to cart">
                  </mat-checkbox>
                </td>
              </ng-container>
              <ng-container matColumnDef="sgNo">
                <th *matHeaderCellDef mat-header-cell mat-sort-header>
                  SG No
                </th>
                <td (click)="openDetails(element)" *matCellDef="let element" class="my_request" mat-cell>
                  <a (click)="openDetails(element)" style="color: blue;cursor: pointer;"> {{ element.sgNo }} </a>
                </td>
              </ng-container>
              <ng-container matColumnDef="lpi">
                <th *matHeaderCellDef mat-header-cell mat-sort-header>LPI</th>
                <td *matCellDef="let element" mat-cell>{{ element.lpi }}</td>
              </ng-container>

              <ng-container matColumnDef="documentType">
                <th *matHeaderCellDef mat-header-cell mat-sort-header>
                  Document Type
                </th>
                <td *matCellDef="let element" mat-cell>
                  {{ element.documentType }}
                </td>
              </ng-container>
              <ng-container matColumnDef="documentSubtype">
                <th *matHeaderCellDef mat-header-cell mat-sort-header>
                  Document SubType
                </th>
                <td *matCellDef="let element" mat-cell>
                  {{ element.documentSubType }}
                </td>
              </ng-container>
              <ng-container matColumnDef="region">
                <th *matHeaderCellDef mat-header-cell mat-sort-header>
                  Region
                </th>
                <td *matCellDef="let element" mat-cell>
                  {{
                  element.region != undefined && element.region != null
                  ? element.region
                  : element.minorRegion
                  }}
                </td>
              </ng-container>
              <ng-container matColumnDef="parcel">
                <th *matHeaderCellDef mat-header-cell mat-sort-header>
                  Parcel
                </th>
                <td *matCellDef="let element" mat-cell>
                  {{
                  element.parcel != null && element.parcel != undefined
                  ? element.parcel
                  : element.erfNumber != null &&
                  element.erfNumber != undefined
                  ? element.erfNumber
                  : element.farmNumber != null &&
                  element.farmNumber != undefined
                  ? element.farmNumber
                  : element.holdingNumber
                  }}
                </td>
              </ng-container>
              <tr *matHeaderRowDef="columns" mat-header-row></tr>
              <tr *matRowDef="let myRowData; columns: columns" mat-row></tr>
            </table>
            <!-- </div> -->
            <!-- <div class="row mx-0 ml-3">
              <div class="col" *ngIf="results.length > 0">
                {{ pageFromValue }} - {{ pageToValue }} Out Of {{ pageSize }}
              </div>
              <div class="col" *ngIf="results.length > 0">
                <ngb-pagination style="float: right" [collectionSize]="pageSize" [pageSize]="20" [(page)]="boundaryPage"
                  [maxSize]="20" [rotate]="true" [boundaryLinks]="true" (pageChange)="loadPage($event)">
                </ngb-pagination>
              </div>
            </div>

            <span style="margin: 10px !important;padding: 10px !important;float: right;">
              <button mat-raised-button (click)="addToCart()" class="submit-button bover pull-left " type="submit">
                Add to Cart
              </button>
            </span> -->

          </mat-card-content>
        </mat-card>
        <!-- </div> -->
      </div>

      <div *ngIf="NgiData != undefined && NgiData?.length > 0 && device == true && searchFilter?.templateListItemId === 567" class="row mx-0">
        <mat-card class="card-table-tasks" style="cursor: pointer; width: -webkit-fill-available">
          <mat-card-content class="table-tasks" style="overflow-x: hidden;">
            <table [dataSource]="dataSource" class="table-margin w-100 inline-table" mat-table matSort>
              <ng-container matColumnDef="select">
                <th mat-header-cell *matHeaderCellDef>
                  <mat-checkbox (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()">
                  </mat-checkbox>
                </th>
                <td mat-cell *matCellDef="let row" style="padding-top: 10px;; padding-right: 10px;">
                  <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)" matTooltip="Add to cart">
                  </mat-checkbox>
                </td>
              </ng-container>
              <ng-container matColumnDef="categoryName">
                <th *matHeaderCellDef mat-header-cell mat-sort-header>
                  Category Name
                </th>
                <td (click)="openDetails(element)" *matCellDef="let element" class="my_request" mat-cell>
                  <a (click)="openDetails(element)" style="color: blue;cursor: pointer;"> {{ element.categoryName }} </a>
                </td>
              </ng-container>
              <ng-container matColumnDef="name">
                <th *matHeaderCellDef mat-header-cell mat-sort-header>
                  Sub Category
                </th>
                <td *matCellDef="let element" mat-cell>
                  {{ element.name }}
                </td>
              </ng-container>
              <ng-container matColumnDef="documentType">
                <th *matHeaderCellDef mat-header-cell mat-sort-header>
                  Document Type
                </th>
                <td *matCellDef="let element" mat-cell>
                  {{ element.documentType }}
                </td>
              </ng-container>
              <ng-container matColumnDef="documentSubtype">
                <th *matHeaderCellDef mat-header-cell mat-sort-header>
                  Document SubType
                </th>
                <td *matCellDef="let element" mat-cell>
                  {{ element.documentSubType }}
                </td>
              </ng-container>
              <tr *matHeaderRowDef="ngiColumns" mat-header-row></tr>
              <tr *matRowDef="let myRowData; columns: ngiColumns" mat-row></tr>
            </table>
            <!-- <div class="row mx-0 ml-3">
              <div class="col" *ngIf="NgiData.length > 0">
                {{ pageFromValue }} - {{ pageToValue }} Out Of {{ pageSize }}
              </div>
              <div class="col" *ngIf="NgiData.length > 0">
                <ngb-pagination style="float: right" [collectionSize]="pageSize" [pageSize]="20" [(page)]="boundaryPage"
                  [maxSize]="20" [rotate]="true" [boundaryLinks]="true" (pageChange)="loadPage($event)">
                </ngb-pagination>
              </div>
            </div>

            <span style="margin: 10px !important;padding: 10px !important;float: right;">
              <button mat-raised-button (click)="addToCart()" class="submit-button bover pull-left " type="submit">
                Add to Cart
              </button>
            </span> -->

          </mat-card-content>
        </mat-card>
      </div>

      <div class="row mx-0 ml-3" *ngIf="(results || NgiData)">
        <div class="col" *ngIf="(results.length > 0 || NgiData?.length > 0)">
          {{ pageFromValue }} - {{ pageToValue }} Out Of {{ pageSize }}
        </div>
        <div class="col" *ngIf="(results.length > 0 || NgiData?.length > 0)">
          <ngb-pagination style="float: right" [collectionSize]="pageSize" [pageSize]="20" [(page)]="boundaryPage"
            [maxSize]="20" [rotate]="true" [boundaryLinks]="true" (pageChange)="loadPage($event)"></ngb-pagination>
        </div>
      </div>

      <span style="margin: 10px !important;padding: 10px !important;float: right;" *ngIf="(results || NgiData)">
        <button [disabled]="selection.selected.length === 0" *ngIf="(results.length > 0 || NgiData?.length > 0)" mat-raised-button
          (click)="addToCart()" class="submit-button bover pull-left " type="submit">
          Add to Cart
        </button>
      </span>
    </div>
    <div class="col col-lg-3">
      <div class="row">
        <div class="col">
          <mat-card>
            <mat-card-content>
              <div class="row">
                <div class="col-md-7">
                  <span class="heading" style="font-size: 22px !important">
                    My Search
                  </span>
                </div>
                <div class="col-md-5">
                  <span class="float-right" style="float: right">
                    <mat-icon (click)="previous()" style="cursor: pointer">
                      keyboard_arrow_left
                    </mat-icon>
                    &nbsp;
                    <mat-icon (click)="next()" style="cursor: pointer">
                      keyboard_arrow_right
                    </mat-icon>
                  </span>
                </div>
              </div>
              <div class="row">
                <span class="col p-0">
                  <table [dataSource]="recentSearch" class="table-margin" mat-table>
                    <ng-container matColumnDef="icon">
                      <td (click)="setSearchData(element)" *matCellDef="let element" mat-cell>
                        <div class="cell-time-ago p-2">
                          <mat-icon>query_builder</mat-icon>
                        </div>
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="title">
                      <td (click)="setSearchData(element)" *matCellDef="let element" mat-cell>
                        <div class="cell-task">
                          {{ element.caption }}&nbsp;&nbsp;
                        </div>
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="timeAgo">
                      <td (click)="setSearchData(element)" *matCellDef="let element" mat-cell>
                        <div class="cell-task req-highlight float-right">
                          {{ element.dated | dateDifference:serverDate }}
                        </div>
                      </td>
                    </ng-container>
                    <tr *matRowDef="let row; columns: searchColumns" mat-row style="cursor: pointer"></tr>
                  </table>
                </span>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <mat-card>
            <mat-card-content>
              <div class="row">
                <span class="col">
                  <p class="heading">Pre-Packaged Data</p>
                </span>
                <span class="col">
                  <span (click)="navigate()" class="float-right text-yellow">View All</span>
                </span>
              </div>
              <div *ngFor="let x of prepackagedData" class="row">
                <span class="col">
                  <p class="sub-heading">{{ x.name }}</p>
                  <p class="text truncate">{{ x.description }}</p>
                </span>
              </div>
              <span *ngIf="prepackagedData.length > 0" class="float-right" style="
                  float: right;
                  margin-left: 2px;
                  margin-top: 5px;
                  margin-bottom: 5px;
                ">
                <mat-icon (click)="previous2()" style="cursor: pointer">
                  keyboard_arrow_left
                </mat-icon>
                &nbsp;
                <mat-icon (click)="next2()" style="cursor: pointer">
                  keyboard_arrow_right
                </mat-icon>
              </span>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>